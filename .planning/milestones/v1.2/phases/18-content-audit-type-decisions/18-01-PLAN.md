---
phase: 18-content-audit-type-decisions
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [.planning/phases/18-content-audit-type-decisions/CONTENT-TRACKER.md]
autonomous: false
---

<objective>
Perform systematic content audit: classify every document by content type, identify form/document redundancy, and produce a comprehensive tracker.

Purpose: Enable Phase 19's purpose-based navigation and Phase 20's semantic rendering by providing accurate content type assignments for all documents.
Output: CONTENT-TRACKER.md with all classifications, redundancy report, and edge cases flagged for review.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/18-content-audit-type-decisions/18-CONTEXT.md
@.planning/phases/16-code-mapping-style-audit/DESIRED-STATE.md (Section 4: Content Type System)

# Source schema
@app/convex/schema.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract and classify all content</name>
  <files>.planning/phases/18-content-audit-type-decisions/CONTENT-TRACKER.md</files>
  <action>
Query all content from Convex and apply classification rules:

**1. Query documents table:**
```bash
cd app && npx convex data documents --limit 200 --format json > /tmp/documents.json
```

**2. Query formSchemas table:**
```bash
cd app && npx convex data formSchemas --limit 100 --format json > /tmp/forms.json
```

**3. Apply Type Detection Heuristics (from DESIRED-STATE.md 4.2):**

For each document, determine contentType using these rules in order:
- `procedure`: Content contains numbered steps (1., 2., 3.) AND imperative verbs (Setup, Check, Verify, Ensure, Clean, etc.)
- `checklist`: Content contains checkboxes (- [ ] or * [ ]) or primarily bullet lists of action items
- `form`: Title contains "Form", "Intake", "Application", or "Request" AND should be in form builder instead
- `reference`: Content primarily consists of tables, specifications, pricing, or factual lookup data
- `guide`: Default fallback for explanatory prose content

**4. Identify redundancy:**
Match documents against formSchemas:
- Compare document titles with form titles
- Check document.sourceFile against formSchema.originalFile
- Flag any document that exists as BOTH markdown doc AND form builder entry

**5. Create CONTENT-TRACKER.md with this structure:**

```markdown
# Content Tracker

## Summary
- Total documents: [N]
- Total forms: [N]
- By content type: procedure [N], reference [N], form [N], checklist [N], guide [N]
- Redundant content: [N] items

## Document Classifications

### Procedures
| Document | Category | Confidence | Notes |
|----------|----------|------------|-------|
| [title] | [category] | high/medium/low | |

### References
[same table format]

### Forms (redirect to form builder)
[same table format, note which formSchema to link to]

### Checklists
[same table format]

### Guides
[same table format]

## Redundancy Report
| Document | Duplicate Form | Resolution |
|----------|----------------|------------|
| [doc title] | [form title] | [keep doc / keep form / merge] |

## Edge Cases (Needs Human Review)
| Document | Best Guess | Confidence | Reason |
|----------|------------|------------|--------|
| [title] | [type] | low | [why unclear] |
```

**Classification confidence:**
- `high`: Clearly matches heuristic pattern
- `medium`: Partially matches, reasonable inference
- `low`: Edge case, needs human review

Do NOT guess when uncertain. Flag edge cases explicitly.
  </action>
  <verify>
- CONTENT-TRACKER.md exists and is well-formed
- All documents from Convex are classified
- All forms are listed
- Redundancy section is populated
- Edge cases section exists (may be empty if all classifications are clear)
  </verify>
  <done>
- Every document has a content type assignment
- Redundant content identified with resolution recommendations
- Low-confidence classifications flagged for review
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete content tracker with type classifications, redundancy report, and edge cases</what-built>
  <how-to-verify>
    1. Open `.planning/phases/18-content-audit-type-decisions/CONTENT-TRACKER.md`
    2. Review **Edge Cases** section — confirm or correct the suggested classifications
    3. Review **Redundancy Report** — approve the proposed resolutions (keep doc / keep form / merge)
    4. Spot-check 5-10 classifications in each content type section for accuracy
    5. Confirm summary counts match your expectation of the content
  </how-to-verify>
  <resume-signal>Type "approved" if classifications are accurate, or provide corrections for specific items</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] CONTENT-TRACKER.md committed to git
- [ ] All documents classified (no missing entries)
- [ ] Redundancy report complete
- [ ] Edge cases reviewed and resolved
- [ ] Summary statistics accurate
</verification>

<success_criteria>

- Every document has an explicit contentType assignment
- Redundant content (markdown + form builder duplicates) identified with resolution path
- Edge cases flagged and reviewed
- Tracker file provides clear reference for Phase 19 and Phase 20
</success_criteria>

<output>
After completion, create `.planning/phases/18-content-audit-type-decisions/18-01-SUMMARY.md`
</output>
