---
phase: 16-code-mapping-style-audit
plan: 02
type: execute
wave: 1
depends_on: []
files_modified: [.planning/phases/16-code-mapping-style-audit/STYLE-VIOLATIONS.md]
autonomous: true
---

<objective>
Audit all components against design tokens and produce style violation inventory.

Purpose: Identify where UI deviates from established design system (globals.css tokens) to inform Phase 17 (Base Component Fixes).
Output: STYLE-VIOLATIONS.md with systematic inventory in machine-parseable format
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-code-mapping-style-audit/16-CONTEXT.md
@.planning/codebase/CONVENTIONS.md

# Design system source of truth:
@app/src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit components against design tokens</name>
  <files>.planning/phases/16-code-mapping-style-audit/STYLE-VIOLATIONS.md</files>
  <action>
Systematically audit all components in app/src/components/ for style violations:

1. **Define Violation Categories:**
   - **Color violations:** Hardcoded hex/rgb instead of --color-* tokens
   - **Typography violations:** Hardcoded font-size/font-family instead of --text-*/--font-* tokens
   - **Spacing violations:** Hardcoded px/rem instead of --space-* tokens
   - **Border/radius violations:** Hardcoded values instead of --radius-*/--border-* tokens
   - **Shadow violations:** Hardcoded box-shadow instead of --shadow-* tokens
   - **Transition violations:** Hardcoded timing instead of --duration-*/--ease-* tokens

2. **Audit Process:**
   - For each component file, grep for style patterns:
     - `style={{` or `style={` (inline styles)
     - Hardcoded color values (#, rgb, rgba, hsl)
     - Hardcoded pixel values (px, rem, em without var())
     - Tailwind classes that could use tokens instead
   - Record: file, line number, violation type, current value, recommended token

3. **Priority Assessment:**
   - HIGH: User-facing components (Header, DocumentViewer, FormRenderer)
   - MEDIUM: Feature components (FormBuilder, CommentSection, MessageList)
   - LOW: Internal/utility components

4. **Aggregate Statistics:**
   - Count violations by type
   - Count violations by component
   - Identify worst offenders

Create STYLE-VIOLATIONS.md with YAML frontmatter for machine parsing:
```yaml
---
audit_date: 2026-01-16
total_violations: N
by_type:
  color: N
  typography: N
  spacing: N
  border: N
  shadow: N
  transition: N
by_priority:
  high: N
  medium: N
  low: N
violations:
  - file: Header.tsx
    line: 45
    type: color
    current: "#333333"
    recommended: var(--color-ink)
    priority: high
---
```

Follow with human-readable summary and detailed breakdown by component.
  </action>
  <verify>STYLE-VIOLATIONS.md exists with YAML frontmatter containing violation inventory</verify>
  <done>Complete style violation inventory with machine-parseable format and priority assessment</done>
</task>

<task type="auto">
  <name>Task 2: Document design system coverage and gaps</name>
  <files>.planning/phases/16-code-mapping-style-audit/STYLE-VIOLATIONS.md</files>
  <action>
Append to STYLE-VIOLATIONS.md a section analyzing design system coverage:

1. **Token Usage Analysis:**
   - Which tokens are heavily used?
   - Which tokens are underutilized?
   - Are there patterns not covered by existing tokens?

2. **Component Consistency:**
   - Which components fully follow design system?
   - Which components are partially compliant?
   - Which components completely ignore design system?

3. **Gap Identification:**
   - Are there styling needs not covered by current tokens?
   - Should new tokens be added?
   - Are there deprecated patterns that should be removed?

4. **Recommendations for Phase 17:**
   - Quick wins (simple find-replace)
   - Medium effort (component refactoring needed)
   - Complex fixes (architecture changes needed)

Add to STYLE-VIOLATIONS.md:
- Design system coverage section
- Gap analysis
- Prioritized fix recommendations for Phase 17
  </action>
  <verify>STYLE-VIOLATIONS.md contains design system coverage analysis and Phase 17 recommendations</verify>
  <done>Style audit complete with actionable recommendations for subsequent phases</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] STYLE-VIOLATIONS.md exists with YAML frontmatter
- [ ] All components in app/src/components/ have been audited
- [ ] Violations are categorized by type and priority
- [ ] Design system coverage analysis included
- [ ] Recommendations for Phase 17 documented
- [ ] Format is both human-readable and machine-parseable
</verification>

<success_criteria>
- All tasks completed
- Every component audited against design tokens
- Violations cataloged with file, line, type, and recommendation
- Clear priority ranking for Phase 17 fixes
- Machine-parseable YAML frontmatter for automation
</success_criteria>

<output>
After completion, create `.planning/phases/16-code-mapping-style-audit/16-02-SUMMARY.md`
</output>
