---
phase: 16-code-mapping-style-audit
plan: 03
type: execute
wave: 2
depends_on: ["16-01", "16-02"]
files_modified: [.planning/phases/16-code-mapping-style-audit/DESIRED-STATE.md]
autonomous: true
---

<objective>
Document target architecture based on v1.2 vision and create implementation scaffold.

Purpose: Bridge current state (from 16-01) and style violations (from 16-02) to desired state for v1.2 content architecture refactoring.
Output: DESIRED-STATE.md with target architecture scaffold flexible enough for subsequent phases to adapt
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-code-mapping-style-audit/16-CONTEXT.md

# Outputs from Wave 1 plans:
@.planning/phases/16-code-mapping-style-audit/USER-FLOWS.md
@.planning/phases/16-code-mapping-style-audit/COMPONENT-MAP.md
@.planning/phases/16-code-mapping-style-audit/STYLE-VIOLATIONS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Document target architecture based on v1.2 vision</name>
  <files>.planning/phases/16-code-mapping-style-audit/DESIRED-STATE.md</files>
  <action>
Create DESIRED-STATE.md documenting what the architecture SHOULD look like:

1. **Vision Synthesis (from STATE.md backlog):**
   Address each v1.2 problem with target state:

   | Problem | Current State | Desired State |
   |---------|---------------|---------------|
   | Blind markdown conversion | Headers blindly followed | Intent-based rendering |
   | No style guide adherence | Inline styles, hardcoded values | Design token enforcement |
   | No semantic formatting | One-size-fits-all rendering | Type-specific formatting |
   | Missing progressive disclosure | Flat content display | Accordions, collapsibles |
   | Misleading navigation | Category-based nav | Purpose-based nav |
   | Redundant content | Docs AND forms | Single source of truth |
   | No content type decisions | Everything is "document" | Explicit content types |

2. **Target Navigation Architecture:**
   - Based on USER-FLOWS.md pain points, propose new navigation structure
   - Design around user intent, not content location
   - Keep flexible (scaffold, not spec)

3. **Target Component Architecture:**
   - Based on COMPONENT-MAP.md, identify components to:
     - Keep as-is
     - Refactor for design system compliance
     - Split/combine for better separation of concerns
     - Create new (e.g., Accordion, CollapsibleSection)

4. **Content Type System:**
   - Define content types: procedure, reference, form, checklist, guide
   - Map content types to rendering strategies
   - Keep extensible for Phase 18 content audit

Format with YAML frontmatter:
```yaml
---
vision: First-principles content architecture
problems_addressed: 7
target_content_types:
  - procedure
  - reference
  - form
  - checklist
  - guide
nav_restructure: purpose-based
component_changes:
  keep: [List]
  refactor: [List]
  new: [List]
---
```
  </action>
  <verify>DESIRED-STATE.md exists with vision synthesis table and target architecture sections</verify>
  <done>Target architecture documented addressing all 7 v1.2 problems</done>
</task>

<task type="auto">
  <name>Task 2: Create implementation scaffold for subsequent phases</name>
  <files>.planning/phases/16-code-mapping-style-audit/DESIRED-STATE.md</files>
  <action>
Append implementation scaffold to DESIRED-STATE.md:

1. **Phase-by-Phase Guidance:**
   Map subsequent phases to desired state changes:

   - **Phase 17 (Base Component Fixes):** Which components need what fixes (reference STYLE-VIOLATIONS.md)
   - **Phase 18 (Content Audit):** Content type framework to apply
   - **Phase 19 (IA Redesign):** Navigation structure to implement
   - **Phase 20 (Semantic Formatting):** Rendering strategies per content type
   - **Phase 21-23:** Form builder, workspace, creation flows

2. **Change Categories:**
   - **Style enforcement:** Design token adoption (quick wins from 16-02)
   - **Structure changes:** Component splitting/combining
   - **New capabilities:** Accordions, content types, purpose-based nav
   - **Data model changes:** Content type field, navigation restructure

3. **Flexibility Points:**
   Explicitly mark what subsequent phases should adapt:
   - Navigation structure (Phase 19 will refine)
   - Content types (Phase 18 will validate against real content)
   - Component boundaries (Phase 17 will discover more during implementation)

4. **Success Metrics:**
   How to measure v1.2 success:
   - Style violation count → 0
   - Content type coverage → 100%
   - Navigation clarity score (user testing)
   - Redundant content → eliminated

Keep scaffold high-level. This is guidance, not prescription.
  </action>
  <verify>DESIRED-STATE.md contains phase-by-phase guidance and flexibility points</verify>
  <done>Implementation scaffold complete with guidance for Phases 17-23</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] DESIRED-STATE.md exists with YAML frontmatter
- [ ] All 7 v1.2 problems have corresponding desired state
- [ ] Target navigation architecture documented
- [ ] Target component architecture documented
- [ ] Content type system defined
- [ ] Phase-by-phase guidance included
- [ ] Flexibility points explicitly marked
- [ ] Success metrics defined
</verification>

<success_criteria>
- All tasks completed
- Current state (from 16-01, 16-02) clearly bridges to desired state
- Scaffold is useful guidance without being over-specified
- Subsequent phases have clear starting points
- Machine-parseable format for reference
</success_criteria>

<output>
After completion, create `.planning/phases/16-code-mapping-style-audit/16-03-SUMMARY.md`
</output>
