---
phase: 19-redundant-content-ia-redesign
plan: 02
type: execute
wave: 2
depends_on: ["19-01"]
files_modified:
  - app/src/components/QuickActionNav.tsx
  - app/convex/documents.ts
  - app/src/components/Header.tsx
autonomous: true
---

<objective>
Create QuickActionNav component and update Header with purpose-based navigation.

Purpose: Replace category-based navigation with purpose-based navigation that reflects user intent ("How do I...?" not "Where is the file...?").
Output: QuickActionNav component for dashboard, Header with purpose-based nav items.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/milestones/v1.2-REFERENCES.md
@.planning/phases/16-code-mapping-style-audit/DESIRED-STATE.md
@.planning/phases/16-code-mapping-style-audit/USER-FLOWS.md
@.planning/phases/18-content-audit-type-decisions/CONTENT-TRACKER.md
@.planning/phases/19-redundant-content-ia-redesign/19-01-SUMMARY.md
@app/src/components/Header.tsx
@app/src/components/CategoryGrid.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add query for documents by contentType</name>
  <files>app/convex/documents.ts</files>
  <action>
Add a new query to fetch documents by contentType:

```typescript
export const byContentType = query({
  args: { contentType: v.string() },
  handler: async (ctx, args) => {
    return await ctx.db
      .query("documents")
      .withIndex("by_contentType", (q) => q.eq("contentType", args.contentType))
      .collect();
  },
});
```

Also add a query to get content type counts for the QuickActionNav:

```typescript
export const contentTypeCounts = query({
  args: {},
  handler: async (ctx) => {
    const docs = await ctx.db.query("documents").collect();
    const counts: Record<string, number> = {
      procedure: 0,
      reference: 0,
      checklist: 0,
      guide: 0,
    };
    for (const doc of docs) {
      if (doc.contentType && counts[doc.contentType] !== undefined) {
        counts[doc.contentType]++;
      }
    }
    return counts;
  },
});
```

Note: Forms are excluded from counts since they redirect to the Forms section.
  </action>
  <verify>Run `cd app && npx convex dev --once` to verify queries compile</verify>
  <done>byContentType and contentTypeCounts queries added to documents.ts</done>
</task>

<task type="auto">
  <name>Task 2: Create QuickActionNav component</name>
  <files>app/src/components/QuickActionNav.tsx</files>
  <wireframe>
+--------------------------------------------------+
|  Quick Actions                                   |
+--------------------------------------------------+
|  +------------+  +------------+  +------------+  |
|  | Procedures |  | References |  | Checklists |  |
|  | 10 items   |  | 32 items   |  | 5 items    |  |
|  +------------+  +------------+  +------------+  |
|                                                  |
|  +------------+  +------------+                  |
|  | Guides     |  | Forms      |                  |
|  | 5 items    |  | Create/View|                  |
|  +------------+  +------------+                  |
+--------------------------------------------------+
  </wireframe>
  <action>
Create QuickActionNav component that displays purpose-based navigation cards:

```typescript
"use client";

import Link from "next/link";
import { useQuery } from "convex/react";
import { api } from "../../convex/_generated/api";

const quickActions = [
  {
    href: "/procedures",
    label: "Procedures",
    description: "Step-by-step instructions for daily operations",
    contentType: "procedure",
  },
  {
    href: "/references",
    label: "References",
    description: "Packages, menus, pricing, and venue layouts",
    contentType: "reference",
  },
  {
    href: "/checklists",
    label: "Checklists",
    description: "Planning checklists and task lists",
    contentType: "checklist",
  },
  {
    href: "/guides",
    label: "Guides",
    description: "Navigation and overview documents",
    contentType: "guide",
  },
  {
    href: "/forms",
    label: "Forms",
    description: "Create, send, and manage forms",
    contentType: null, // No count, links to forms section
  },
];

export function QuickActionNav() {
  const counts = useQuery(api.documents.contentTypeCounts);

  return (
    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
      {quickActions.map((action) => (
        <Link
          key={action.href}
          href={action.href}
          className="block p-5 no-underline transition-all duration-150"
          style={{
            background: "var(--color-surface)",
            border: "1px solid var(--color-border)",
            borderRadius: "0",
          }}
          onMouseEnter={(e) => {
            e.currentTarget.style.borderColor = "var(--color-accent)";
            e.currentTarget.style.boxShadow = "0 2px 8px rgba(0, 0, 0, 0.06)";
          }}
          onMouseLeave={(e) => {
            e.currentTarget.style.borderColor = "var(--color-border)";
            e.currentTarget.style.boxShadow = "none";
          }}
        >
          <h3
            className="font-semibold mb-1"
            style={{
              fontFamily: "var(--font-display)",
              color: "var(--color-ink)",
              fontSize: "var(--text-lg)",
            }}
          >
            {action.label}
          </h3>
          <p
            className="text-sm m-0 mb-2"
            style={{ color: "var(--color-ink-muted)" }}
          >
            {action.description}
          </p>
          {action.contentType && counts && (
            <span
              style={{
                fontFamily: "var(--font-body)",
                fontSize: "var(--text-xs)",
                color: "var(--color-ink-light)",
              }}
            >
              {counts[action.contentType] ?? 0} documents
            </span>
          )}
        </Link>
      ))}
    </div>
  );
}
```

Key design decisions:
- Uses design tokens exclusively (var(--color-*), var(--text-*), var(--font-*))
- borderRadius: 0 per brand aesthetic
- Links to content type listing pages (to be created in Phase 20)
- Shows document counts per content type
- Forms links to existing /forms page
  </action>
  <verify>Run `cd app && npx tsc --noEmit src/components/QuickActionNav.tsx`</verify>
  <done>QuickActionNav component created with purpose-based navigation cards</done>
</task>

<task type="auto">
  <name>Task 3: Update Header with purpose-based navigation</name>
  <files>app/src/components/Header.tsx</files>
  <action>
Replace category-based navItems with purpose-based navigation:

```typescript
const navItems = [
  { href: "/", label: "Home" },
  { href: "/procedures", label: "Procedures" },
  { href: "/references", label: "References" },
  { href: "/checklists", label: "Checklists" },
  { href: "/guides", label: "Guides" },
  { href: "/messages", label: "Messages" },
  { href: "/forms", label: "Forms" },
  { href: "/workspace", label: "My Workspace" },
];
```

This replaces the old category-based structure:
- Home (kept)
- ~~Services~~ -> merged into References
- ~~Clients~~ -> merged into References/Procedures/Checklists by type
- ~~Staff~~ -> merged into Procedures/References by type
- ~~Operations~~ -> merged into Procedures/References by type
- ~~Deliverables~~ -> accessible via search or direct link
- Messages (kept)
- Forms (kept)
- My Workspace (kept)

Benefits:
- Navigation reflects user intent (what they want to DO)
- Removes misleading "Clients" label
- Groups by content purpose, not content location
- Reduces nav items from 9 to 8
  </action>
  <verify>Run `cd app && npx tsc --noEmit src/components/Header.tsx`</verify>
  <done>Header updated with purpose-based navigation items</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd app && npx convex dev --once` succeeds
- [ ] `cd app && npx tsc --noEmit` passes for all modified files
- [ ] QuickActionNav component exists and uses design tokens
- [ ] Header has 8 purpose-based nav items
</verification>

<success_criteria>
- byContentType and contentTypeCounts queries work
- QuickActionNav displays 5 action cards with counts
- Header navigation uses purpose-based items
- All components use design tokens (no hardcoded colors/sizes)
</success_criteria>

<output>
After completion, create `.planning/phases/19-redundant-content-ia-redesign/19-02-SUMMARY.md`
</output>
