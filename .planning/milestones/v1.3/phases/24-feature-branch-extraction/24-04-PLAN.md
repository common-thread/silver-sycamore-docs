---
phase: 24-feature-branch-extraction
plan: 04
type: execute
wave: 2
depends_on: ["24-01"]
files_modified: [app/src/app/forms, app/src/components/FormBuilder.tsx, app/src/components/FieldEditor.tsx, app/src/components/DraggableFieldCard.tsx, app/src/components/FormShareDialog.tsx, app/src/components/SubmissionViewer.tsx, app/src/components/CommentSection.tsx, app/src/components/CommentItem.tsx, app/src/components/MentionInput.tsx, app/src/app/[category]/[slug]/page.tsx]
autonomous: true
---

<objective>
Remove forms builder and comments system from main branch.

Purpose: Extract form creation/management UI and threaded document comments. Documents remain viewable but without interactive commenting or form builder access.
Output: Main branch without forms routes, form builder components, or comment UI.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-feature-branch-extraction/24-CONTEXT.md
@.planning/phases/24-feature-branch-extraction/EXTRACTION.md

@app/src/app/[category]/[slug]/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove forms builder routes</name>
  <files>app/src/app/forms (directory)</files>
  <action>
Delete the entire forms routes directory:

```bash
rm -rf app/src/app/forms
```

This removes:
- app/src/app/forms/page.tsx (form listing)
- app/src/app/forms/new/page.tsx (create form)
- app/src/app/forms/[formId]/edit/page.tsx (edit form)
- app/src/app/forms/[formId]/submissions/page.tsx (view submissions)
- app/src/app/forms/submissions/page.tsx (all submissions)

Note: FormRenderer.tsx is NOT deleted as it may be used by share links or wiki form-type docs.

Add connector comment:
```typescript
// CONNECTOR: forms builder routes - restore from feature/full-v1
// Original location: app/src/app/forms/
```
  </action>
  <verify>Run `ls app/src/app/forms 2>/dev/null || echo "Directory removed"` - should show "Directory removed"</verify>
  <done>Forms routes directory deleted, connector comment added</done>
</task>

<task type="auto">
  <name>Task 2: Remove form builder components</name>
  <files>app/src/components/FormBuilder.tsx, app/src/components/FieldEditor.tsx, app/src/components/DraggableFieldCard.tsx, app/src/components/FormShareDialog.tsx, app/src/components/SubmissionViewer.tsx</files>
  <action>
Delete form builder components:

```bash
rm app/src/components/FormBuilder.tsx
rm app/src/components/FieldEditor.tsx
rm app/src/components/DraggableFieldCard.tsx
rm app/src/components/FormShareDialog.tsx
rm app/src/components/SubmissionViewer.tsx
```

Keep these components (used elsewhere):
- FormRenderer.tsx - renders forms for submission (share links)
- QuickActionNav.tsx - will be updated in Plan 05

The form builder UI provided:
- Drag-and-drop field arrangement
- Field type configuration
- Form sharing and routing
- Submission viewing
  </action>
  <verify>Run `ls app/src/components/FormBuilder.tsx app/src/components/FieldEditor.tsx 2>/dev/null || echo "Components removed"` - should show files not found</verify>
  <done>Form builder components deleted (5 files)</done>
</task>

<task type="auto">
  <name>Task 3: Remove comment system</name>
  <files>app/src/components/CommentSection.tsx, app/src/components/CommentItem.tsx, app/src/components/MentionInput.tsx, app/src/app/[category]/[slug]/page.tsx</files>
  <action>
1. Delete comment components:
```bash
rm app/src/components/CommentSection.tsx
rm app/src/components/CommentItem.tsx
rm app/src/components/MentionInput.tsx
```

2. Update the document detail page (app/src/app/[category]/[slug]/page.tsx):
   - Remove import: `import { CommentSection } from "@/components/CommentSection";`
   - Remove CommentSection component from JSX
   - Add connector comment where comments were rendered:
   ```typescript
   {/* CONNECTOR: CommentSection - restore from feature/full-v1 */}
   ```

The comment system provided:
- Threaded comments on wiki documents
- @mention support with user search
- Edit and delete capabilities

Note: The comments Convex table remains (unused but non-breaking).
  </action>
  <verify>
1. `ls app/src/components/Comment*.tsx app/src/components/MentionInput.tsx 2>/dev/null || echo "Components removed"`
2. `cd app && bun run build` - should pass without CommentSection import errors
  </verify>
  <done>Comment components deleted, document page updated, build passes</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `/forms` route no longer exists
- [ ] Form builder components deleted (5 files)
- [ ] Comment components deleted (3 files)
- [ ] Document detail page updated (CommentSection removed)
- [ ] `cd app && bun run build` passes
</verification>

<success_criteria>
- Forms builder routes removed
- Form builder components removed
- Comment system removed
- Document pages still render without comments
- Build passes
- Connector comments mark restoration points
</success_criteria>

<output>
After completion, create `.planning/phases/24-feature-branch-extraction/24-04-SUMMARY.md`
</output>
