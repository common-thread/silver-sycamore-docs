---
phase: 24-feature-branch-extraction
plan: 02
type: execute
wave: 2
depends_on: ["24-01"]
files_modified: [app/src/app/messages, app/src/components/ChannelList.tsx, app/src/components/MessageList.tsx, app/src/components/MessageItem.tsx, app/src/components/MessageInput.tsx, app/src/components/CreateChannelDialog.tsx, app/src/components/StartDMDialog.tsx, app/src/components/NotificationBell.tsx, app/src/components/NotificationInbox.tsx, app/src/components/Header.tsx]
autonomous: true
---

<objective>
Remove messaging system and notifications from main branch.

Purpose: Simplify codebase by extracting Slack-like messaging feature. The complete messaging system is preserved on `feature/full-v1` branch.
Output: Main branch without messaging routes, components, or notification UI.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/24-feature-branch-extraction/24-CONTEXT.md
@.planning/phases/24-feature-branch-extraction/EXTRACTION.md

@app/src/components/Header.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove messaging routes</name>
  <files>app/src/app/messages (directory)</files>
  <action>
Delete the entire messaging routes directory:

```bash
rm -rf app/src/app/messages
```

This removes:
- app/src/app/messages/page.tsx (channel listing)
- app/src/app/messages/layout.tsx (messaging layout)
- app/src/app/messages/[channelId]/page.tsx (channel view)

Add a CONNECTOR comment in a nearby relevant file (e.g., app/src/app/page.tsx or create a placeholder):

```typescript
// CONNECTOR: messaging routes - restore from feature/full-v1
// Original location: app/src/app/messages/
```
  </action>
  <verify>Run `ls app/src/app/messages 2>/dev/null || echo "Directory removed"` - should show "Directory removed"</verify>
  <done>Messaging routes directory deleted, connector comment added</done>
</task>

<task type="auto">
  <name>Task 2: Remove messaging and notification components</name>
  <files>app/src/components/ChannelList.tsx, app/src/components/MessageList.tsx, app/src/components/MessageItem.tsx, app/src/components/MessageInput.tsx, app/src/components/CreateChannelDialog.tsx, app/src/components/StartDMDialog.tsx, app/src/components/NotificationBell.tsx, app/src/components/NotificationInbox.tsx</files>
  <action>
Delete messaging components:

```bash
rm app/src/components/ChannelList.tsx
rm app/src/components/MessageList.tsx
rm app/src/components/MessageItem.tsx
rm app/src/components/MessageInput.tsx
rm app/src/components/CreateChannelDialog.tsx
rm app/src/components/StartDMDialog.tsx
rm app/src/components/NotificationBell.tsx
rm app/src/components/NotificationInbox.tsx
```

These components are only used by the messaging routes and Header's notification bell.

Do NOT remove:
- MentionInput.tsx (also used by comments - will be removed in Plan 04)
- UserSearchInput.tsx (may be used elsewhere)
- FileAttachment.tsx (may be used elsewhere)
  </action>
  <verify>Run `ls app/src/components/Message*.tsx app/src/components/Channel*.tsx app/src/components/Notification*.tsx 2>/dev/null || echo "Components removed"` - should show files not found</verify>
  <done>All 8 messaging/notification components deleted</done>
</task>

<task type="auto">
  <name>Task 3: Update Header to remove notification bell</name>
  <files>app/src/components/Header.tsx</files>
  <action>
Update Header.tsx to remove the NotificationBell component:

1. Remove the import:
```typescript
// REMOVE: import { NotificationBell } from "./NotificationBell";
```

2. Remove from JSX (in header-actions div):
```typescript
// REMOVE: {isSignedIn && <NotificationBell />}
```

3. Add connector comment where bell was:
```typescript
{/* CONNECTOR: NotificationBell - restore from feature/full-v1 */}
```

Note: Do NOT update the navItems array yet - that happens in Plan 05 to avoid conflicts with parallel plans.
  </action>
  <verify>Run `bun run build` in app directory - should complete without import errors for NotificationBell</verify>
  <done>Header compiles without NotificationBell, connector comment in place</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `/messages` route no longer exists
- [ ] All 8 messaging/notification components deleted
- [ ] Header.tsx builds without NotificationBell
- [ ] `cd app && bun run build` passes (may have other warnings, but no messaging import errors)
</verification>

<success_criteria>
- Messaging routes removed
- Messaging components removed
- Notification UI removed from Header
- Build passes without messaging-related import errors
- Connector comments mark restoration points
</success_criteria>

<output>
After completion, create `.planning/phases/24-feature-branch-extraction/24-02-SUMMARY.md`
</output>
