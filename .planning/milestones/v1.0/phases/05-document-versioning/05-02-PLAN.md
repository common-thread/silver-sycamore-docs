---
phase: 05-document-versioning
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified: [app/src/components/VersionHistory.tsx, app/src/app/[category]/[slug]/page.tsx]
autonomous: true
---

<objective>
Build UI to display document version history.

Purpose: Allow users to see when and by whom a document was edited.
Output: Version history panel showing all versions with timestamps.
</objective>

<context>
@.planning/PROJECT.md
@.planning/phases/05-document-versioning/05-01-SUMMARY.md
@app/src/app/[category]/[slug]/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create VersionHistory component</name>
  <files>app/src/components/VersionHistory.tsx</files>
  <action>
Create `src/components/VersionHistory.tsx`:

- Takes documentId as prop
- Uses `useQuery(api.versions.listByDocument, { documentId })`
- Shows collapsible panel with version list
- Each version shows: version number, date, editor name, change note
- Clicking version opens comparison view (linked to 05-03)
- Current version highlighted
- Design system styling
  </action>
  <verify>VersionHistory displays version list</verify>
  <done>VersionHistory component created</done>
</task>

<task type="auto">
  <name>Task 2: Create VersionBadge component</name>
  <files>app/src/components/VersionBadge.tsx</files>
  <action>
Create small badge showing current version number:

- Shows "v{number}" in compact badge
- Clickable to expand version history
- Positioned near document title
  </action>
  <verify>VersionBadge renders</verify>
  <done>VersionBadge created</done>
</task>

<task type="auto">
  <name>Task 3: Add version display to document page</name>
  <files>app/src/app/[category]/[slug]/page.tsx</files>
  <action>
Update document page to:

1. Show VersionBadge near title
2. Add VersionHistory panel (collapsible sidebar or bottom section)
3. Style to not overwhelm main content
  </action>
  <verify>Document page shows version info</verify>
  <done>Version UI integrated</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] VersionHistory shows all versions
- [ ] VersionBadge displays current version
- [ ] Document page has version UI
- [ ] TypeScript compiles
</verification>

<success_criteria>
- Users can see document's edit history
- Version list is easy to scan
- Clear indication of current version
</success_criteria>

<output>
After completion, create `.planning/phases/05-document-versioning/05-02-SUMMARY.md`
</output>
