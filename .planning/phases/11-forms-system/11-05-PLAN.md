---
phase: 11-forms-system
plan: 05
type: execute
wave: 4
depends_on: ["11-01", "11-02"]
files_modified: [app/src/app/forms/submissions/page.tsx, app/src/app/forms/[formId]/submissions/page.tsx, app/src/components/SubmissionViewer.tsx, app/convex/forms.ts, app/convex/seed.ts]
autonomous: false
---

<objective>
Build submission management views and seed the 15 legacy forms from planning documents.

Purpose: Give staff visibility into form responses and pre-load existing forms so they're ready to use.
Output: Submissions list and viewer, legacy forms seeded from 02-form-schemas.md.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-forms-system/11-CONTEXT.md
@.planning/02-form-schemas.md

@app/convex/seed.ts
@app/src/app/forms/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create submission list and viewer pages</name>
  <files>app/src/app/forms/[formId]/submissions/page.tsx, app/src/components/SubmissionViewer.tsx</files>
  <wireframe>
Submissions List:
+--------------------------------------------------+
|  Wedding Booking Form - Submissions              |
+--------------------------------------------------+
|  +--------------------------------------------+  |
|  | John Smith                    Jan 15, 2026 |  |
|  | john@example.com                    [View] |  |
|  +--------------------------------------------+  |
|  | Jane Doe                      Jan 14, 2026 |  |
|  | jane@example.com                    [View] |  |
|  +--------------------------------------------+  |
+--------------------------------------------------+

Submission Viewer:
+--------------------------------------------------+
|  Submission Details                           [x]|
+--------------------------------------------------+
|  From: John Smith (john@example.com)             |
|  Submitted: January 15, 2026 at 2:30 PM          |
+--------------------------------------------------+
|  Name: John Smith                                |
|  Email: john@example.com                         |
|  Event Date: March 15, 2026                      |
|  Guest Count: 150                                |
|  Event Type: Wedding Reception                   |
|  Additional Notes: Need wheelchair access...     |
+--------------------------------------------------+
|                              [Delete] [Close]    |
+--------------------------------------------------+
  </wireframe>
  <action>
Create submission management UI:

**app/src/app/forms/[formId]/submissions/page.tsx:**
- List all submissions for a form
- Query with `api.forms.getSubmissions`
- Show respondent name/email and date
- Click to open SubmissionViewer
- Require auth + owner check

**app/src/components/SubmissionViewer.tsx:**
- Dialog/modal showing full submission
- Parse submission data JSON
- Display each field with label and value
- Format dates, handle multiselect arrays
- Delete button (with confirmation)
- Close button

Add link from forms list to submissions page.
Show submission count badge on forms list.
  </action>
  <verify>bun run build</verify>
  <done>Submissions list shows responses, viewer displays all fields</done>
</task>

<task type="auto">
  <name>Task 2: Create all-submissions inbox page</name>
  <files>app/src/app/forms/submissions/page.tsx</files>
  <wireframe>
+--------------------------------------------------+
|  Form Submissions                                |
+--------------------------------------------------+
|  Filter: [All Forms v] [All Time v]              |
+--------------------------------------------------+
|  +--------------------------------------------+  |
|  | Wedding Booking - John Smith    Jan 15     |  |
|  +--------------------------------------------+  |
|  | Corporate Event - ABC Corp      Jan 14     |  |
|  +--------------------------------------------+  |
|  | Wedding Booking - Jane Doe      Jan 13     |  |
|  +--------------------------------------------+  |
+--------------------------------------------------+
  </wireframe>
  <action>
Create inbox-style view for all submissions routed to current user:

- Query `api.forms.getMyReceivedSubmissions`
- Shows submissions across all forms
- Include form title in each row
- Sort by date (newest first)
- Click to open SubmissionViewer
- Optional: Filter by form dropdown

This gives staff a single place to see all incoming responses.
Add "Submissions" link to header or forms page navigation.
  </action>
  <verify>bun run build</verify>
  <done>Submissions inbox shows all responses for current user</done>
</task>

<task type="auto">
  <name>Task 3: Seed legacy forms from planning documents</name>
  <files>app/convex/forms.ts</files>
  <action>
Create a seed mutation to import the 15 forms from 02-form-schemas.md:

Add `seedLegacyForms` mutation in forms.ts:
- Takes no arguments (forms are hardcoded from planning docs)
- Creates each form from the JSON schema in 02-form-schemas.md
- Sets ownerId to the calling user (admin who runs seed)
- Sets isPublished: false (drafts ready to customize)
- Checks if form already exists by formId to prevent duplicates

Forms to seed (from 02-form-schemas.md):
1. booking-wedding
2. booking-corporate
3. booking-shower
4. hr-time-off-request
5. hr-employee-warning
6. operations-decor-appointment
7. operations-final-appointment
8. operations-vendor-setup
9. operations-tasting
10. checklist-9-12-months
11. checklist-7-8-months
12. checklist-4-6-months
13. checklist-1-3-months
14. checklist-pre-wedding
15. reset-checklist-hall
16. reset-checklist-saloon
17. day-of-music-list

Convert the JSON field definitions to the string format expected by schema.
Mark status from original (active vs needs_redesign) in description.

Note: This is 17 forms total per the schema doc (title said 15, actual count is 17).
  </action>
  <verify>npx convex dev --once</verify>
  <done>seedLegacyForms mutation exists, creates all 17 forms</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete forms system with builder, renderer, sharing, and legacy form seeding</what-built>
  <how-to-verify>
    1. Run: cd app && bun run dev (in one terminal)
    2. Run: cd app && npx convex dev (in another terminal)
    3. Navigate to /forms - should see forms list page
    4. Click "New Form" - create a test form with 3-4 fields
    5. Publish the form
    6. Click Share - copy the public link
    7. Open link in incognito - fill out and submit
    8. Return to /forms, click submissions - see your response
    9. Run seed: In Convex dashboard, call forms.seedLegacyForms
    10. Refresh /forms - should see 17+ legacy forms as drafts
  </how-to-verify>
  <resume-signal>Type "approved" to complete phase, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `bun run build` succeeds
- [ ] Submissions list shows responses
- [ ] SubmissionViewer displays field values
- [ ] Submissions inbox shows routed responses
- [ ] seedLegacyForms creates 17 forms
- [ ] Human verification passed
</verification>

<success_criteria>
- All tasks completed
- Staff can view and manage submissions
- Legacy forms are seeded and ready to customize
- Full forms workflow verified by human
</success_criteria>

<output>
After completion, create `.planning/phases/11-forms-system/11-05-SUMMARY.md`
</output>
