---
phase: 17-base-component-fixes
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/src/app/globals.css
  - app/src/components/FormRenderer.tsx
  - app/src/components/FormBuilder.tsx
  - app/src/components/FieldEditor.tsx
  - app/src/components/ui/Input.tsx
  - app/src/components/ui/Select.tsx
autonomous: true
---

<objective>
Establish error color foundation by adding missing tokens and standardizing error color usage across all components.

Purpose: The hardcoded `#C75050` error color appears 21 times across 5 components. This creates the single largest category of color violations. Fixing it first establishes the pattern and reduces violation count significantly.

Output: globals.css with error color variants, all error color instances using `var(--color-error)`.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/16-code-mapping-style-audit/STYLE-VIOLATIONS.md
@.planning/phases/16-code-mapping-style-audit/DESIRED-STATE.md
@app/src/app/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add missing error tokens to globals.css</name>
  <files>app/src/app/globals.css</files>
  <action>
Add error color variant tokens to the CSS custom properties in globals.css. The design system already has `--color-error: #8B4D4D` but components use rgba variants that need tokens.

Add these tokens in the appropriate section (near other color tokens):
```css
--color-error-bg: rgba(139, 77, 77, 0.1);
--color-error-border: rgba(139, 77, 77, 0.3);
```

Note: The existing `--color-error` is #8B4D4D (a muted, on-brand error red), NOT #C75050 (the incorrectly hardcoded value). The tokens use the correct #8B4D4D base.
  </action>
  <verify>grep for `--color-error-bg` and `--color-error-border` in globals.css shows the new tokens</verify>
  <done>globals.css contains error-bg and error-border tokens using the correct #8B4D4D base color</done>
</task>

<task type="auto">
  <name>Task 2: Replace hardcoded error color across all components</name>
  <files>app/src/components/FormRenderer.tsx, app/src/components/FormBuilder.tsx, app/src/components/FieldEditor.tsx, app/src/components/ui/Input.tsx, app/src/components/ui/Select.tsx</files>
  <action>
Replace all instances of hardcoded error color `#C75050` with the design token `var(--color-error)`.

Also replace rgba variants:
- `rgba(199, 80, 80, 0.1)` → `var(--color-error-bg)`
- `rgba(199, 80, 80, 0.3)` → `var(--color-error-border)`

Files and approximate line numbers from STYLE-VIOLATIONS.md:
- FormRenderer.tsx: lines 227, 249, 298, 337, 379, 424, 447 (7 instances)
- FormBuilder.tsx: lines 484, 485, 527, 564, 565, 568 (6 instances, includes rgba)
- Input.tsx: lines 66, 78, 156 (3 instances)
- Select.tsx: lines 116, 128, 648 (3 instances)
- FieldEditor.tsx: check for any instances (may have 2)

Total: ~21 instances to replace.

Do NOT change any other styling - only error color values.
  </action>
  <verify>grep -r "#C75050" app/src/components/ returns no results; grep -r "rgba(199, 80, 80" app/src/components/ returns no results</verify>
  <done>All 21 hardcoded error color instances replaced with design tokens. Zero instances of #C75050 or rgba(199, 80, 80, *) remain in components.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `grep -r "#C75050" app/src/components/` returns no results
- [ ] `grep -r "rgba(199, 80, 80" app/src/components/` returns no results
- [ ] `grep "color-error-bg" app/src/app/globals.css` shows the new token
- [ ] `bun run build` in app/ succeeds without errors
</verification>

<success_criteria>

- All 21 error color violations fixed
- New error tokens added to globals.css
- Build passes without errors
- No hardcoded #C75050 or rgba(199, 80, 80, *) values remain
</success_criteria>

<output>
After completion, create `.planning/phases/17-base-component-fixes/17-01-SUMMARY.md`
</output>
