---
phase: 09-suggestion-workflow
plan: 02
type: execute
wave: 2
depends_on: ["09-01"]
files_modified: [app/src/components/SuggestionForm.tsx, app/src/components/SuggestionList.tsx, app/src/app/suggestions/page.tsx, app/src/app/[category]/[slug]/page.tsx]
autonomous: true
---

<objective>
Create UI for staff to propose and manage their suggestions.

Purpose: Enable users to create suggestions for official documents, edit drafts, submit for review, and track their suggestion status.
Output: SuggestionForm component, SuggestionList component, suggestions dashboard page, integration into document pages.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plan provides API:
@.planning/phases/09-suggestion-workflow/09-01-SUMMARY.md

# UI patterns from Phase 8 comments:
@app/src/components/CommentSection.tsx

# Document page integration point:
@app/src/app/[category]/[slug]/page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create SuggestionForm and SuggestionList components</name>
  <files>app/src/components/SuggestionForm.tsx, app/src/components/SuggestionList.tsx</files>
  <action>
**SuggestionForm.tsx:**
- Props: documentId (for new) OR suggestionId (for editing draft)
- If documentId: pre-populate with current document title/content
- If suggestionId: load existing draft
- Fields: title (input), content (textarea with reasonable height), changeNote (textarea for explaining changes)
- Buttons: "Save Draft" (create/update), "Submit for Review" (submit mutation)
- Only show "Submit" if status is draft
- Success/error states with feedback
- Use existing design system (bronze accent, ink/paper colors)

**SuggestionList.tsx:**
- Shows user's suggestions grouped by status (pending, draft, approved, rejected)
- Each item shows: document title, suggestion title, status badge, timestamps
- Click to edit (if draft) or view details
- Status badges: draft=muted, pending=bronze, approved=green, rejected=red
- Empty states per section
- Link to create new suggestion from document
  </action>
  <verify>npm run build succeeds, components render without errors</verify>
  <done>Both components created with proper styling and functionality</done>
</task>

<task type="auto">
  <name>Task 2: Create suggestions dashboard and document page integration</name>
  <files>app/src/app/suggestions/page.tsx, app/src/app/[category]/[slug]/page.tsx</files>
  <action>
**app/src/app/suggestions/page.tsx:**
- Protected page (redirect to signin if not authenticated)
- Title: "My Suggestions"
- Render SuggestionList for current user
- Link to browse documents (to make new suggestions)

**Document page integration:**
- Add "Suggest Edit" button in document header area (near version badge)
- Button navigates to /suggestions/new?documentId={id}
- Only show for authenticated users
- Use subtle styling (ghost button or text link) so it doesn't compete with content

**app/src/app/suggestions/new/page.tsx:**
- Protected page
- Read documentId from searchParams
- Render SuggestionForm with documentId
- Breadcrumb: "Suggestions > New Suggestion for {docTitle}"

**app/src/app/suggestions/[id]/page.tsx:**
- Protected page
- Load suggestion by ID
- If user is author and draft: show editable SuggestionForm
- If user is author and not draft: show read-only view with status
- If user is not author: redirect to suggestions list
  </action>
  <verify>npm run build succeeds, navigation flow works end-to-end</verify>
  <done>Suggestions dashboard exists, document pages have "Suggest Edit" button, full create/edit flow works</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` in app/ succeeds
- [ ] /suggestions page shows user's suggestions
- [ ] Document pages show "Suggest Edit" button
- [ ] Can create new suggestion from document
- [ ] Can edit draft suggestions
- [ ] Can submit draft for review
- [ ] Status badges display correctly
</verification>

<success_criteria>

- All UI components created and styled consistently
- Full suggestion authoring flow: create → edit → submit
- Navigation between pages works
- No TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/09-suggestion-workflow/09-02-SUMMARY.md`
</output>
